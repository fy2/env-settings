$DB::deep = 500; # or more if necessary

sub afterinit {
    push @DB::typeahead, "c" if $ENV{DEBUGGING};
}

my $skip;
BEGIN { $skip = '^(?:Moose|Eval::Closure|Class::MOP|mro|Catalyst)' }
print STDERR <<"END";

Debugger skipping: /$skip/

See ~/.perldb if you don't like this behavior.

END

use DB::Skip pkgs => [ qr/$skip/ ];

sub DB::afterinit {
    no warnings 'once';

    # give me a window of lines instead of a single line
    push @DB::typeahead => "{{v"
      unless $DB::already_curly_curly_v++;
}
